# Домашнее задание к занятию "10.01. Зачем и что нужно мониторить"

## Обязательные задания

### Выбрать метрики для мониторинга на проект

> 1. Вас пригласили настроить мониторинг на проект. На онбординге вам рассказали, что проект представляет из себя платформу для вычислений с выдачей текстовых отчетов, которые сохраняются на диск. Взаимодействие с платформой осуществляется по протоколу http. Также вам отметили, что вычисления загружают ЦПУ. Какой минимальный набор метрик вы выведите в мониторинг и почему?

#### Работоспособность платформы

- количество http(s) запросов
- время ответа http
- коды ответа http 

#### Работоспособность оборудования

- CPU, общая загрузка, CPUla 1/5/15
- Заполнение RAM
- Нагрузка сетевых интерфейсов
- Диск 
  - скорость записи/чтения на диск
  - свободное место
  - состояние SMART
  - latency
  - состояние RAID
- Файловая система
  - ошибки ФС
  - количество открытых дескрипторов
- IOwait

#### Безопасность

- Актуальность сертификатов
- Неудачные авторизации 
- Анализ сетевого трафика для определения атак

### Предложить менеджеру решение по метрикам

> 2. Менеджер продукта посмотрев на ваши метрики сказал, что ему непонятно что такое RAM/inodes/CPUla. Также он сказал, что хочет понимать, насколько мы выполняем свои обязанности перед клиентами и какое качество обслуживания. Что вы можете ему предложить?

Согласовать цели SLO - уровень надежности, например 99%. Насторить мониторинг по ключевым метрикам SLI для понимания, насколько значения этих метрик соответствуют целям SLO. Настроить мониторинг соответствия целям SLO за определенный временной интервал (день, неделя, месяц и т.д.)

### Что предпринять, чтобы разработчики получали ошибки приложения?

> 3. Вашей DevOps команде в этом году не выделили финансирование на построение системы сбора логов. Разработчики в свою очередь хотят видеть все ошибки, которые выдают их приложения. Какое решение вы можете предпринять в этой ситуации, чтобы разработчики получали ошибки приложения?

* Написать скрипты на bash или python, которые будут выбирать ошибки и отправлять, например, в Telegram-чат. Или складывать в файл на общем сетевом ресурсе.
* На существующей инфраструктуре поднять виртуальную машину и развернуть Sentry или ELK для сбора ошибок.

### Где ошибка в формуле мониторинга?

> 4. Вы, как опытный SRE, сделали мониторинг, куда вывели отображения выполнения SLA=99% по http кодам ответов. Вычисляете этот параметр по следующей формуле: summ_2xx_requests/summ_all_requests. Данный параметр не поднимается выше 70%, но при этом в вашей системе нет кодов ответа 5xx и 4xx. Где у вас ошибка?

Поскольку кодов 4хх и 5хх в системе нет, то их можно в формулу не включать, а вот 1хх и 3хх кодов не хватает.
```
(summ_1xx_requests + summ_2xx_requests + summ_3xx_requests)/summ_all_requests
```